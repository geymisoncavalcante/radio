(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[15406],{618674:e=>{e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},889464:(e,t,s)=>{var r=s(618674)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});e.exports=r},607187:(e,t,s)=>{var r=s(889464),n=s(479833),a=/[&<>"']/g,o=RegExp(a.source);e.exports=function(e){return(e=n(e))&&o.test(e)?e.replace(a,r):e}},768559:(e,t,s)=>{s.d(t,{Z:()=>i});var r=s(826067);const n=/\/today\/(article|best|trending)\/[\w-]+\/(\d+)/,a=/\/discover\/article\/[\w-]+\/(\d+)/,o=(e,t)=>t?e.substring(t.length).split("/")[0]:e,c=(e,t,s,c)=>{var i,u;if(!e)return"";let d="";const l=t.board&&t.board.url;switch(e){case"/":case"/homefeed/":return"UserHomefeedResource";case t.pinner&&`/${t.pinner.username}/pins/`:return"UserPinsResource";case t.pinner&&`/${t.pinner.username}/`:case/\/_activity\//.test(e)&&e:return"UserActivityPinsResource";case/\/_created\//.test(e)&&e:return t.story_pin_data_id?"UserStoryPinsFeedResource":"UserActivityPinsResource";case/\/_community\//.test(e)&&e:return"UserDiscoveredPinsResource";case/\/_shop\//.test(e)&&e:return"StoreFrontFeedResource";case/\/_saved\//.test(e)&&e:return"BoardlessPinsResource";case t.pinner&&`/${t.pinner.username}/_shopping_list/`:return"ShoppingListFeedResource";case/\/visual-search\//.test(e)&&e:return"VisualLiveSearchResource";case/\/pin\//.test(e)&&e:d="/pin/";const p=o(e,d);if(t.id!==p)return t.call_to_create_source_pin_id?`ApiResource_callToCreatePins_${p}`:`RelatedPinFeedResource_${p}`;break;case/\/search\//.test(e)&&e:if(s){return`SearchResource_${((0,r.mB)(s,{shouldDecode:!1}).q||"").toLowerCase()}`}if(c)return`SearchResource_${encodeURIComponent(c.q||"").toLowerCase()}`;break;case a.test(e)&&e:return`ExploreArticleResource_${(null===(i=e.match(a))||void 0===i?void 0:i[2])||"unknown"}`;case/\/discover\/article\//.test(e)&&e:d="/discover/article/";return`ExploreArticleResource_${o(e,d)}`;case/\/categories\//.test(e)&&e:d="/categories/";return`CategoryFeedResource_${o(e,d)}`;case/\/discover\/topics\//.test(e)&&e:return"CategoryFeedResource";case/\/news_hub\//.test(e)&&e:d="/news_hub/";return`NewsHubDetailsResource_${o(e,d)}`;case/\/_tools\/more-ideas\//.test(e)&&e:return"BoardContentRecommendationResource";case/\/topics\//.test(e)&&e:d="/topics/";return`TopicFeedResource_${o(e,d)}`;case t.pinner&&`/${t.pinner.username}/products/`:return"StoreFrontFeedResource";case/\/source\//.test(e)&&e:d="/source/";return`DomainFeedResource_${o(e,d)}`;case/\/explore\//.test(e)&&e:d="/explore/";return`SearchResource_${o(e,d)}`;case l:case!!l&&/\/more_ideas\//.test(e)&&e:return"BoardFeedResource";case l&&e.indexOf(l)>-1&&e:return"BoardSectionPinsResource";case/\/following\//.test(e)&&e:return"FollowingFeedResource";case/\/brand_catalog\//.test(e)&&e:return"BrandCatalogFeedResource";case n.test(e)&&e:return`TodayArticleFeedResource_${(null===(u=e.match(n))||void 0===u?void 0:u[2])||"unknown"}`;case/\/today\//.test(e):return"TodayTabResource";case/\story_feed\//.test(e)&&e:if(s){const{feed_type:e,request_params:t}=(0,r.mB)(s);return`StoryFeedResource_${e}_${t}`}break;case/\/your-shop\//.test(e)&&e:return"PersonalBoutiqueResource"}return""},i=(e,t,s)=>{if(!e||!e.tracking_params||!t)return;if(!e.tracking_params_map)return`${e.tracking_params}~0`;const{pathname:r,search:n,query:a}=t,o=c(r,e,n,a),i=e.tracking_params_map||{},u=Object.keys(i);let d;if((r||"").startsWith("/pin/")){const e=u.find((e=>"PinResource"!==e));d=e?i[e]:i.PinResource}else d=i[o];let l;if(!d&&s&&s.length){const t=(e=>{let t=null==e?void 0:e.pathname;return t?(t.match(/\/search\//)&&null!=e&&e.search&&(t+=e.search),t.toLowerCase()):""})(s[s.length-1].location);l=c(t,e,n,a),d=i[l]}return d||(d=`${e.tracking_params||""}~0`),d}},124237:(e,t,s)=>{s.d(t,{Z:()=>o});var r=s(607187),n=s.n(r);const a={};a._showErrorCallback=a._showErrorCallback||null,a.setShowHtmlErrorCallback=function(e){a._showErrorCallback=e},a.showError=function(e,t,s){const r=n()(e);return a.showHtmlError(r,t,s)},a.showHtmlError=function(e,t,s){"function"==typeof a._showErrorCallback&&a._showErrorCallback(e,t,s)};const o=a},784641:(e,t,s)=>{s.d(t,{E5:()=>u,T7:()=>r,Y_:()=>d,Yj:()=>o,d9:()=>p,nx:()=>l,pe:()=>c,xt:()=>i});s(883119);function r(e,t,s,r){const n=function(e,t){return t?"shop":0===e||2===e?"trending":1===e?"best":"article"}(e,t),a=function(e){return e.toLowerCase().replace(/[.,\/#!?$%\^&\*+;:{}=\-_`~()\â€™'"]/g,"").trim().replace(/\s+/g,"-")}(s);return`/today/${n}/${encodeURIComponent(a)}/${r}/`}const n={"www.pinterest.com":"US","www.pinterest.co.uk":"GB","www.pinterest.ca":"CA","www.pinterest.com.au":"AU","br.pinterest.com":"BR","www.pinterest.com.mx":"MX","ar.pinterest.com":"AR","www.pinterest.cl":"CL","co.pinterest.com":"CO","www.pinterest.de":"DE","www.pinterest.at":"AT","www.pinterest.ch":"CH","www.pinterest.fr":"FR","in.pinterest.com":"IN","id.pinterest.com":"ID","www.pinterest.jp":"JP"},a={US:"en",GB:"en",CA:"en",AU:"en",BR:"pt",MX:"es",AR:"es",CL:"es",CO:"es",PE:"es",DE:"de",AT:"de",CH:"de",FR:"fr",IN:"en",ID:"id",JP:"ja",IT:"it"},o=(e,t)=>{const s=a[e];return!(null===s||s!==t&&!t.startsWith(s))},c=e=>n[e],i=(e,t,s)=>e||(t||s||""),u=(e,t)=>e||((null==t?void 0:t.origin_pinner)||(null==t?void 0:t.pinner)),d=e=>"todayarticle"===e.type,l=e=>Array.isArray(e)&&e.length>0&&e.every((e=>"story"===e.type)),p=e=>{var t,s;return(null!==(t=e.height)&&void 0!==t?t:1)/(null!==(s=e.width)&&void 0!==s?s:1)}},215292:(e,t,s)=>{s.d(t,{Z:()=>o,q:()=>a});var r=s(667294);const n=()=>{const[e,t]=(0,r.useState)(!1),[s,n]=(0,r.useState)(!1),[a,o]=(0,r.useState)(!1);return{active:e,focused:s,hovered:a,onBlur:()=>{n(!1),t(!1)},onFocus:()=>n(!0),onMouseDown:()=>t(!0),onMouseEnter:()=>o(!0),onMouseLeave:()=>{o(!1),t(!1)},onMouseUp:()=>t(!1)}};function a({children:e}){return e(n())}const o=n},479301:(e,t,s)=>{s.d(t,{i5:()=>g,sX:()=>h,Z5:()=>m,NG:()=>v,MT:()=>f});var r=s(667294),n=s(6637),a=s(802201),o=s(682492),c=s.n(o);const i=(e,t)=>e.data[t]&&e.data[t].messages||[];function u(e,t){const s={};return e.filter((e=>!!e)).reduce(((e,r)=>{const n=t(r);return s[n]?(c()(s[n],r),e):(s[n]=r,e.concat([r]))}),[])}function d(e){return[...e].sort(((e,t)=>new Date(e.created_ms||e.created_at)-new Date(t.created_ms||t.created_at)))}function l(e,t,s){let r=i(e,t).concat(s);return r=u(r,(e=>e.id)),d(r)}const p={conversationsUnseenCount:0,data:{},newsHubCount:0,open:null,objectAttachment:null,showConversationsDropdown:!1,showNewMessageView:!1,ui:{},unread:0};function _(e=p,t){if("CONVERSATION_OPEN"===t.type)return{...e,open:t.payload.id,objectAttachment:null,showNewMessageView:!1,ui:{...e.ui,[t.payload.id]:{contactRequestId:t.payload.contactRequestId||"",isPreview:t.payload.isPreview}}};if("CONVERSATION_CLOSE"===t.type)return{...e,open:null,objectAttachment:null,showNewMessageView:!1,ui:{...e.ui,[t.payload.id]:{contactRequestId:t.payload.contactRequestId||"",isPreview:!1,isDeclined:t.payload.isDeclined}}};if("CONVERSATION_CREATE"===t.type){const{id:s}=t.payload;return{...e,data:{...e.data,[s]:{...e[s]||{},...t.payload}}}}if("CONVERSATION_DELETE"===t.type){const s={...e,data:{...e.data}},{id:r}=t.payload;return delete s.data[r],s}if("FETCH_COMPLETE"===t.type){const{options:s,resource:r,response:n}=t.payload,a=n.resource_response.data;if("ConversationMessagesResource"===r){const t=a||[],r=(null==s?void 0:s.conversation_id)||"",n=l(e,r,t),o=n[n.length-1];return{...e,data:{...e.data,[r]:{...e.data[r],id:r,messages:n,unread:0,last_message:o}}}}if("ConversationsResource"===r){const t=a||[],s={...e,data:{...e.data}};return t.forEach((e=>{const{id:t,created_at:r,name:n,board:a,emails:o,unread:c,users:i,last_message:u}=e,d=l(s,t,[u]);s.data[t]={...s.data[t],id:t,created_at:r,name:n,board:a,emails:o||[],unread:c||0,users:i||[],last_message:u,messages:d}})),s}if("ConversationResource"===r){const t=a||{},{id:s}=t,r={...e,data:{...e.data}};return s&&(r.data[s]={...r.data[s],...t}),r}if("NewsHubBadgeResource"===r){if(a){const t=a.conversations_unseen_count||0;return{...e,unread:t}}return e}}else{if("MESSAGE_SEND_PENDING"===t.type){const{id:s,message:r}=t.payload;if(e.data[s]){const t=l(e,s,[r]);return{...e,data:{...e.data,[s]:{...e.data[s],id:s,messages:t,last_message:r}}}}return e}if("MESSAGE_SEND_PENDING_CLEAR"===t.type){const{id:s,messageId:r,newMessageId:n}=t.payload;if(e.data[s]){const t=i(e,s).find((e=>e.id===r));if(t){const a={...t,id:n};let o=i(e,s).filter((e=>e.id!==r)).concat([a]);return o=u(o,(e=>e.id)),o=d(o),{...e,data:{...e.data,[s]:{...e.data[s],id:s,messages:o}}}}}return e}if("OPEN_NEW_MESSAGE"===t.type){const{objectAttachment:s}=t.payload||null;return{...e,showNewMessageView:!0,open:null,objectAttachment:s}}if("CLOSE_DROPDOWN"===t.type)return{...e,showConversationsDropdown:!1,objectAttachment:null,showNewMessageView:!1};if("OPEN_DROPDOWN"===t.type)return{...e,showConversationsDropdown:!0};if("UPDATE_NEWSHUB_COUNT"===t.type)return{...e,newsHubCount:t.payload};if("UPDATE_UNREAD_COUNT"===t.type)return{...e,conversationsUnseenCount:t.payload}}return e}var w=s(425288),C=s(505920),E=s(785893);const R=(()=>{let e=0;return()=>e++})(),{Provider:y,useHook:m}=(0,w.Z)("Conversations");function g({children:e}){const[t,s]=(0,r.useReducer)(_,p),a=(0,r.useCallback)((e=>s({type:"FETCH_COMPLETE",payload:e})),[]);(0,C.Z8)("ConversationMessagesResource",a),(0,C.my)("ConversationMessagesResource",a),(0,C.Z8)("ConversationsResource",a),(0,C.Z8)("ConversationResource",a),(0,C.Z8)("NewsHubBadgeResource",a);const o=(0,r.useCallback)(((e,t=!1,r="")=>s({type:"CONVERSATION_OPEN",payload:{id:e,isPreview:t,contactRequestId:r}})),[]),c=(0,r.useCallback)(((e,t="",r=!1)=>s({type:"CONVERSATION_CLOSE",payload:{id:e,contactRequestId:t,isDeclined:r}})),[]),i=(0,r.useCallback)((e=>s({type:"CONVERSATION_CREATE",payload:e})),[]),u=(0,r.useCallback)((e=>s({type:"CONVERSATION_DELETE",payload:{id:e}})),[]),d=(0,r.useCallback)(((e,t,r)=>{n.Z.create("ConversationsResource",{user_ids:e,emails:t,text:""}).callCreate().then((e=>{const t=e&&e.resource_response.data;s({type:"CONVERSATION_OPEN",payload:{id:t.id}})})).catch((e=>{const t=e.message_detail||e.message||"";r(t)}))}),[]),l=(0,r.useCallback)((()=>{s({type:"CLOSE_DROPDOWN"})}),[]),w=(0,r.useCallback)((()=>{s({type:"OPEN_DROPDOWN"})}),[]),R=(0,r.useCallback)((e=>{s({type:"OPEN_NEW_MESSAGE",payload:{objectAttachment:e}})}),[]),m=(0,r.useCallback)(((e,t)=>s({type:"MESSAGE_SEND_PENDING",payload:{id:e,message:t}})),[]),g=(0,r.useCallback)(((e,t,r)=>s({type:"MESSAGE_SEND_PENDING_CLEAR",payload:{id:e,messageId:t,newMessageId:r}})),[]),v=(0,r.useCallback)((e=>s({type:"UPDATE_NEWSHUB_COUNT",payload:e})),[]),h=(0,r.useCallback)((e=>s({type:"UPDATE_UNREAD_COUNT",payload:e})),[]),f=(0,r.useMemo)((()=>({conversationOpen:o,conversationClose:c,conversationCreate:i,conversationDelete:u,conversationGet:d,dropdownClose:l,dropdownOpen:w,newMessageOpen:R,pendingMessageSend:m,pendingMessageClear:g,updateNewsHubCount:v,updateUnreadCount:h,conversations:t})),[o,c,i,u,d,l,w,R,m,g,v,h,t]);return(0,E.jsx)(y,{value:f,children:e})}function v(){const{conversations:e,conversationCreate:t,pendingMessageSend:s,pendingMessageClear:r}=m(),o=(0,a.AF)();return(a,c,i,u)=>new Promise(((d,l)=>{const{text:p,pinId:_,boardId:w,userId:C,didItId:E}=c;function y(){const e=n.Z.create("ConversationMessagesResource",{conversation_id:a,text:p,pin:_,board:w,user:C,user_did_it_data:E,source:i}),t=`${R()}`;s(a,{text:p,sender:u,created_at:(new Date).toString(),created_ms:Date.now(),id:t,board:null,event_type:null,pin:_?o[_]:null,type:"message",user_did_it_data:null,user:null}),e.callCreate().then((e=>{r(a,t,e.resource_response.data.id),d()})).catch(l)}e.data[a]?y():n.Z.create("ConversationResource",{conversation_id:a}).callGet().then((e=>{const s=e&&e.resource_response&&e.resource_response.data;t(s),y()}))}))}function h(e){const{conversations:t}=m();return t.data[e]}function f(e){const{conversations:t}=m();return t.ui[e]||{contactRequestId:"",isDeclined:!1,isPreview:!1}}},480622:(e,t,s)=>{s.d(t,{C:()=>i,f:()=>c});var r=s(667294),n=s(425288),a=s(785893);const{Provider:o,useHook:c}=(0,n.Z)("MostRecentPin");function i({children:e}){const[t,s]=(0,r.useState)(),[n,c]=(0,r.useState)(),i=(0,r.useCallback)((e=>{const t=n?n.slice(0,10):[],s=[e].concat(t.filter((t=>t!==e)));c(s)}),[n]),u=(0,r.useMemo)((()=>({id:t,plpImageSignatures:n,setMostRecentPinId:s,setMostRecentPinImage:i})),[t,n,i]);return(0,a.jsx)(o,{value:u,children:e})}},711108:(e,t,s)=>{s.d(t,{l:()=>d,E:()=>u});var r=s(667294),n=s(425288);function a(e={},t){if("SUGGESTIONS_FETCH_COMPLETE"===t.type){const{payload:n}=t;if("ShareSuggestionsResource"===n.resource){var s;const r=t.payload.response.resource_response.data||[],{term:a=""}=null!==(s=n.options)&&void 0!==s?s:{};return{...e,[a]:r}}if("ShareSuggestionsTypeaheadResource"===n.resource){var r;const s=(t.payload.response.resource_response.data||{}).items||[],{term:a=""}=null!==(r=n.options)&&void 0!==r?r:{};return{...e,[a]:s}}}return e}var o=s(505920),c=s(785893);const{Provider:i,useHook:u}=(0,n.Z)("ShareSuggestions");function d({children:e}){const[t,s]=(0,r.useReducer)(a,{}),n=e=>{s({type:"SUGGESTIONS_FETCH_COMPLETE",payload:e})};(0,o.Z8)("ShareSuggestionsResource",n),(0,o.Z8)("ShareSuggestionsTypeaheadResource",n);const u=(0,r.useMemo)((()=>({shareSuggestions:t})),[t]);return(0,c.jsx)(i,{value:u,children:e})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/15406-b06a3df87ee9ffcf.mjs.map